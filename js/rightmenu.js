function setMask(){if(document.getElementsByClassName("rmMask")[0]!=undefined)return document.getElementsByClassName("rmMask")[0];mask=document.createElement("div");mask.className="rmMask";mask.style.width=window.innerWidth+"px";mask.style.height=window.innerHeight+"px";mask.style.background="#fff";mask.style.opacity=".0";mask.style.position="fixed";mask.style.top="0";mask.style.left="0";mask.style.zIndex=998;document.body.appendChild(mask);document.getElementById("rightMenu").style.zIndex=19198;return mask}function insertAtCursor(e,t){if(document.selection){e.focus();sel=document.selection.createRange();sel.text=t;sel.select()}else if(e.selectionStart||e.selectionStart=="0"){var o=e.selectionStart;var n=e.selectionEnd;var s=e.scrollTop;e.value=e.value.substring(0,o)+t+e.value.substring(n,e.value.length);if(s>0){e.scrollTop=s}e.focus();e.selectionStart=o+t.length;e.selectionEnd=o+t.length}else{e.value+=t;e.focus()}}let rmf={};rmf.showRightMenu=function(e,t=0,o=0){let n=$("#rightMenu");n.css("top",t+"px").css("left",o+"px");if(e){n.show()}else{n.hide()}};rmf.copyWordsLink=function(){let e=window.location.href;let t=document.createElement("textarea");t.value=e;document.body.appendChild(t);t.select();document.execCommand("Copy");document.body.removeChild(t)};rmf.switchReadMode=function(){const e=document.body;e.classList.add("read-mode");const t=document.createElement("button");t.type="button";t.className="fas fa-sign-out-alt exit-readmode";e.appendChild(t);function o(){e.classList.remove("read-mode");t.remove();t.removeEventListener("click",o)}t.addEventListener("click",o)};rmf.copySelect=function(){document.execCommand("Copy",false,null)};rmf.scrollToTop=function(){document.getElementsByClassName("menus_items")[1].setAttribute("style","");document.getElementById("name-container").setAttribute("style","display:none");btf.scrollToDest(0,500)};document.body.addEventListener("touchmove",(function(){}),{passive:false});function popupMenu(){window.oncontextmenu=function(e){if(mouseMode=="off")return true;$(".rightMenu-group.hide").hide();if(document.getSelection().toString()){$("#menu-text").show()}if(document.getElementById("post")){$("#menu-post").show()}else{if(document.getElementById("page")){$("#menu-post").show()}}var t=window.document.body;t=e.target;var o=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/;if(o.test(window.getSelection().toString())&&t.tagName!="A"){$("#menu-too").show()}if(t.tagName=="A"){$("#menu-to").show();rmf.open=function(){if(t.href.indexOf("http://")==-1&&t.href.indexOf("https://")==-1||t.href.indexOf("yisous.xyz")!=-1){pjax.loadUrl(t.href)}else{location.href=t.href}};rmf.openWithNewTab=function(){window.open(t.href)};rmf.copyLink=function(){let e=t.href;let o=document.createElement("textarea");o.value=e;document.body.appendChild(o);o.select();document.execCommand("Copy");document.body.removeChild(o)}}else if(t.tagName=="IMG"){$("#menu-img").show();rmf.openWithNewTab=function(){window.open(t.src)};rmf.click=function(){t.click()};rmf.copyLink=function(){let e=t.src;let o=document.createElement("textarea");o.value=e;document.body.appendChild(o);o.select();document.execCommand("Copy");document.body.removeChild(o)};rmf.saveAs=function(){var e=document.createElement("a");var o=t.src;var n=o.split("/")[-1];e.href=o;e.download=n;e.click();window.URL.revokeObjectURL(o)}}else if(t.tagName=="TEXTAREA"||t.tagName=="INPUT"){$("#menu-paste").show();rmf.paste=function(){navigator.permissions.query({name:"clipboard-read"}).then((e=>{if(e.state=="granted"||e.state=="prompt"){navigator.clipboard.readText().then((e=>{console.log(e);insertAtCursor(t,e)}))}else{Snackbar.show({text:"请允许读取剪贴板！",pos:"top-center",showAction:false})}}))}}let n=e.clientX+10;let s=e.clientY;let i=$("#rightMenu").width();let a=$("#rightMenu").height();if(n+i>window.innerWidth){n-=i+10}if(s+a>window.innerHeight){s-=s+a-window.innerHeight}mask=setMask();$(".rightMenu-item").click((()=>{$(".rmMask").attr("style","display: none")}));$(window).resize((()=>{rmf.showRightMenu(false);$(".rmMask").attr("style","display: none")}));mask.onclick=()=>{$(".rmMask").attr("style","display: none")};rmf.showRightMenu(true,s,n);$(".rmMask").attr("style","display: flex");return false};window.addEventListener("click",(function(){rmf.showRightMenu(false)}))}if(!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){popupMenu()}const box=document.documentElement;function addLongtabListener(e,t){let o=0;e.ontouchstart=()=>{o=0;o=setTimeout((()=>{t();o=0}),380)};e.ontouchmove=()=>{clearTimeout(o);o=0};e.ontouchend=()=>{if(o){clearTimeout(o)}}}addLongtabListener(box,popupMenu);rmf.fullScreen=function(){if(document.fullscreenElement)document.exitFullscreen();else document.documentElement.requestFullscreen()};if(localStorage.getItem("mouse")==undefined){localStorage.setItem("mouse","on")}var mouseMode=localStorage.getItem("mouse");function changeMouseMode(){if(localStorage.getItem("mouse")=="on"){mouseMode="off";localStorage.setItem("mouse","off");debounce((function(){new Vue({data:function(){this.$notify({title:"切换右键模式成功🍔",message:"当前鼠标右键已恢复为系统默认！",position:"top-left",offset:50,showClose:true,type:"success",duration:5e3})}})}),300)}else{mouseMode="on";localStorage.setItem("mouse","on");debounce((function(){new Vue({data:function(){this.$notify({title:"切换右键模式成功🍔",message:"当前鼠标右键已更换为网站指定样式！",position:"top-left",offset:50,showClose:true,type:"success",duration:5e3})}})}),300)}}